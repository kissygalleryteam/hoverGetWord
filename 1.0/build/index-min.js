/*!build time : 2013-10-23 3:03:28 PM*/
KISSY.add("gallery/hoverGetWord/1.0/index",function(a,b){function c(a){var b=this;c.superclass.constructor.call(b,a),b.init()}return a.extend(c,b,{init:function(){var b=this,c=b.get("el"),d=(b.get("maxAge"),null),e=!0;a.one(window).on("mousemove",function(f){e=!0,clearInterval(d),d=setInterval(function(){if(e){var d=f.pageX-a.one(window).scrollLeft(),g=f.pageY-a.one(window).scrollTop(),h=b.getWordAtPoint(c.getDOMNode(),d,g);b.get("callback")(h),e=!1}},b.get("timout"))})},getWordAtPoint:function(a,b,c){if(a){var d=this,e=0,f=0,g=null;if(3===a.nodeType)g=d._getWord(a,b,c);else for(f=a.childNodes.length,e=0;f>e;e++)d._tagFilter(a.childNodes[e].nodeName,["SCRIPT","STYLE"])&&(g=g||d.getWordAtPoint(a.childNodes[e],b,c));return g}},_tagFilter:function(a,b){var c=0,d=b.length;for(c=0;d>c;c++)if(b[c]===a)return!1;return!0},_getWord:function(a,b,c){var d=document.createRange();d.selectNodeContents(a);for(var e=0,f=0,g=null,h=d.toString(),i=(h.length,0),j=null;j=h.match(/\b\S+\b/);){if(i=h.search(/\b\S+\b/),e=f+i,f=e+j[0].length,d.setStart(d.startContainer,e),d.setEnd(d.startContainer,f),g=d.getBoundingClientRect(),g.left<=b&&g.right>=b&&g.top<=c&&g.bottom>=c)return j[0];h=h.slice(i+j[0].length)}return null}},{ATTRS:{name:{value:"HoverGetWord"},timeout:{value:1e3},el:{value:null},callback:{value:function(a){console.log(a)}}}}),c},{requires:["base"]});